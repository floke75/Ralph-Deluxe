{
  "project": "ralph-deluxe",
  "branch": "main",
  "max_iterations": 50,
  "validation_strategy": "strict",
  "tasks": [
    {
      "id": "TASK-001",
      "title": "Create directory structure and config files",
      "description": "Set up the project scaffold per the directory layout spec.",
      "status": "done",
      "order": 1,
      "skills": [
        "bash-conventions",
        "jq-patterns"
      ],
      "needs_docs": false,
      "libraries": [],
      "acceptance_criteria": [
        "All directories exist",
        "Config JSON files valid"
      ],
      "depends_on": [],
      "retry_count": 0,
      "max_retries": 2
    },
    {
      "id": "TASK-002",
      "title": "Core orchestrator loop skeleton",
      "description": "Write ralph.sh with main loop, argument parsing, iteration flow.",
      "status": "done",
      "order": 2,
      "skills": [
        "bash-conventions"
      ],
      "needs_docs": false,
      "libraries": [],
      "acceptance_criteria": [
        "bash -n passes",
        "shellcheck passes",
        "Dry-run mode works"
      ],
      "depends_on": [
        "TASK-001"
      ],
      "retry_count": 0,
      "max_retries": 2
    },
    {
      "id": "TASK-003",
      "title": "Git operations module",
      "description": "Implement lib/git-ops.sh with checkpoint, rollback, and commit functions.",
      "status": "done",
      "order": 3,
      "skills": [
        "bash-conventions",
        "git-workflow",
        "testing-bats"
      ],
      "needs_docs": false,
      "libraries": [],
      "acceptance_criteria": [
        "bats tests pass",
        "Rollback restores state"
      ],
      "depends_on": [
        "TASK-001"
      ],
      "retry_count": 0,
      "max_retries": 2
    },
    {
      "id": "TASK-004",
      "title": "Plan operations module",
      "description": "Implement lib/plan-ops.sh with task retrieval and amendments.",
      "status": "done",
      "order": 4,
      "skills": [
        "bash-conventions",
        "jq-patterns",
        "testing-bats"
      ],
      "needs_docs": false,
      "libraries": [],
      "acceptance_criteria": [
        "Task retrieval respects deps",
        "Amendments work"
      ],
      "depends_on": [
        "TASK-001"
      ],
      "retry_count": 1,
      "max_retries": 2
    },
    {
      "id": "TASK-005",
      "title": "Context assembly module",
      "description": "Implement lib/context.sh with prompt assembly and truncation.",
      "status": "done",
      "order": 5,
      "skills": [
        "bash-conventions",
        "jq-patterns",
        "testing-bats"
      ],
      "needs_docs": false,
      "libraries": [],
      "acceptance_criteria": [
        "Prompt assembly works",
        "Truncation preserves priority"
      ],
      "depends_on": [
        "TASK-001"
      ],
      "retry_count": 0,
      "max_retries": 2
    },
    {
      "id": "TASK-006",
      "title": "Validation gate module",
      "description": "Implement lib/validation.sh with strict/lenient/tests_only strategies.",
      "status": "done",
      "order": 6,
      "skills": [
        "bash-conventions",
        "testing-bats"
      ],
      "needs_docs": false,
      "libraries": [],
      "acceptance_criteria": [
        "Each strategy works",
        "Failure context generated"
      ],
      "depends_on": [
        "TASK-001"
      ],
      "retry_count": 0,
      "max_retries": 2
    },
    {
      "id": "TASK-007",
      "title": "Compaction trigger and strategy module",
      "description": "Implement lib/compaction.sh with triggers and knowledge indexing.",
      "status": "done",
      "order": 7,
      "skills": [
        "bash-conventions",
        "jq-patterns",
        "testing-bats"
      ],
      "needs_docs": false,
      "libraries": [],
      "acceptance_criteria": [
        "Trigger conditions work",
        "Compaction state resets"
      ],
      "depends_on": [
        "TASK-001"
      ],
      "retry_count": 0,
      "max_retries": 2
    },
    {
      "id": "TASK-008",
      "title": "Claude Code CLI integration",
      "description": "Implement run_coding_iteration, parse_handoff_output, save_handoff.",
      "status": "in_progress",
      "order": 8,
      "skills": [
        "bash-conventions",
        "jq-patterns",
        "testing-bats"
      ],
      "needs_docs": false,
      "libraries": [],
      "acceptance_criteria": [
        "Dry-run works",
        "Response parsing correct",
        "Error handling"
      ],
      "depends_on": [
        "TASK-002",
        "TASK-003",
        "TASK-004",
        "TASK-005",
        "TASK-006",
        "TASK-007"
      ],
      "retry_count": 0,
      "max_retries": 2
    },
    {
      "id": "TASK-009",
      "title": "Wire everything together",
      "description": "Connect all modules in ralph.sh, implement full iteration cycle.",
      "status": "pending",
      "order": 9,
      "skills": [
        "bash-conventions"
      ],
      "needs_docs": false,
      "libraries": [],
      "acceptance_criteria": [
        "End-to-end dry run works",
        "Resume continues correctly"
      ],
      "depends_on": [
        "TASK-008"
      ],
      "retry_count": 0,
      "max_retries": 2
    },
    {
      "id": "TASK-010",
      "title": "Prompt templates and skill files",
      "description": "Write all markdown templates and skill files.",
      "status": "pending",
      "order": 10,
      "skills": [],
      "needs_docs": false,
      "libraries": [],
      "acceptance_criteria": [
        "Templates exist",
        "Skill files < 4KB",
        "Clear markers"
      ],
      "depends_on": [
        "TASK-001"
      ],
      "retry_count": 0,
      "max_retries": 2
    },
    {
      "id": "TASK-011",
      "title": "Comprehensive test suite",
      "description": "Write bats-core integration tests for the full orchestrator cycle.",
      "status": "pending",
      "order": 11,
      "skills": [
        "testing-bats",
        "bash-conventions"
      ],
      "needs_docs": false,
      "libraries": [],
      "acceptance_criteria": [
        "All tests pass",
        "Edge cases covered",
        "Under 30s"
      ],
      "depends_on": [
        "TASK-002",
        "TASK-003",
        "TASK-004",
        "TASK-005",
        "TASK-006",
        "TASK-007"
      ],
      "retry_count": 0,
      "max_retries": 2
    },
    {
      "id": "TASK-012",
      "title": "Documentation and verification",
      "description": "Write README.md, finalize CLAUDE.md, run full verification.",
      "status": "pending",
      "order": 12,
      "skills": [],
      "needs_docs": false,
      "libraries": [],
      "acceptance_criteria": [
        "README complete",
        "All tests pass",
        "Shellcheck passes"
      ],
      "depends_on": [
        "TASK-009",
        "TASK-010",
        "TASK-011"
      ],
      "retry_count": 0,
      "max_retries": 2
    }
  ]
}
