# Purpose: Ralph configuration for the test harness pipeline test.
# Consumed by: .ralph/ralph.sh during test runs against the Task Tracker project.

# === Core Settings ===
RALPH_MAX_ITERATIONS=30            # 14 tasks + retry budget
RALPH_PLAN_FILE="plan.json"
RALPH_VALIDATION_STRATEGY="strict"  # All checks must pass
RALPH_MODE="agent-orchestrated"

# === Compaction Settings ===
RALPH_COMPACTION_INTERVAL=5
RALPH_COMPACTION_THRESHOLD_BYTES=32000
RALPH_COMPACTION_MAX_TURNS=10

# === Coding Iteration Settings ===
RALPH_DEFAULT_MAX_TURNS=200
RALPH_MIN_DELAY_SECONDS=5          # Faster iteration for test runs
RALPH_CONTEXT_BUDGET_TOKENS=8000
RALPH_CONTEXT_BUDGET_TOKENS_HPI=16000

# === CLI Settings ===
RALPH_MODEL=""                      # Use default model
RALPH_FALLBACK_MODEL="sonnet"
RALPH_SKIP_PERMISSIONS=true

# === MCP Transport ===
RALPH_MCP_TRANSPORT=""              # Auto-detect

# === Git Settings ===
RALPH_AUTO_COMMIT=true
RALPH_COMMIT_PREFIX="ralph"

# === Agent-Orchestrated Mode Settings ===
RALPH_CONTEXT_AGENT_MODEL=""
RALPH_AGENT_PASSES_ENABLED=false   # Disable optional passes for speed

# === Logging ===
RALPH_LOG_LEVEL="info"
RALPH_LOG_FILE=".ralph/logs/ralph.log"

# === Validation Commands (Node.js project) ===
RALPH_VALIDATION_COMMANDS=(
    "npx jest --forceExit --detectOpenHandles 2>&1"
    "npx eslint src/ tests/ --max-warnings 0 2>&1"
    "npx playwright test 2>&1"
)
